{"ast":null,"code":"import _asyncToGenerator from \"/Users/hoando/Desktop/BYU_W2022/CS260/Labs/creative-project-4/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nexport default {\n  name: \"LoginAndRegisterComponent\",\n  methods: {\n    login: function login() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var result, _username, _password;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _username = document.getElementById(\"username\").value;\n                _password = document.getElementById(\"password\").value;\n\n                if (!(_username === \"\" || _password === \"\")) {\n                  _context.next = 6;\n                  break;\n                }\n\n                alert(\"Username and password cannot be blank\");\n                return _context.abrupt(\"return\");\n\n              case 6:\n                _context.next = 8;\n                return axios.post(\"/api/users/login\", {\n                  username: _username,\n                  password: _password\n                });\n\n              case 8:\n                result = _context.sent;\n                _this.$root.$data.isLoggedIn = true;\n                _this.$root.$data.currentUser = _username;\n                _this.$root.$data.currentFavorites = result.data.favorites;\n                document.getElementById(\"username\").value = \"\";\n                document.getElementById(\"password\").value = \"\";\n                _context.next = 20;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n                alert(\"An error happened. Please check your credentials and/or try again later!\");\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 16]]);\n      }))();\n    },\n    register: function register() {\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var newUsername, newPassword;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                newUsername = document.getElementById(\"username\").value;\n                newPassword = document.getElementById(\"password\").value;\n\n                if (!(newUsername === \"\" || newPassword === \"\")) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                alert(\"Username and password cannot be blank\");\n                return _context2.abrupt(\"return\");\n\n              case 6:\n                _context2.next = 8;\n                return axios.post(\"/api/users/register\", {\n                  username: newUsername,\n                  password: newPassword\n                });\n\n              case 8:\n                alert(\"New user successfully registered\");\n                _context2.next = 15;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n                alert(\"An error happened. Please check your credentials and/or try again later!\");\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 11]]);\n      }))();\n    },\n    logout: function logout() {\n      this.$root.$data.currentUser = \"\";\n      this.$root.$data.currentFavorites = [];\n      this.$root.$data.currentDate = \"\";\n      this.$root.$data.isLoggedIn = false;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACAA,mCADA;AAEAC;AACAC,SADA,mBACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGAC,yBAHA,GAGAC,yCAHA;AAIAC,yBAJA,GAIAD,yCAJA;;AAAA,sBAMAD,oCANA;AAAA;AAAA;AAAA;;AAOAG;AAPA;;AAAA;AAAA;AAAA,uBAWAC;AACAC,qCADA;AAEAC;AAFA,kBAXA;;AAAA;AAWAC,sBAXA;AAgBA;AACA;AACA;AAEAN;AACAA;AArBA;AAAA;;AAAA;AAAA;AAAA;AAuBAO;AACAL,sBACA,0EADA;;AAxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4BA,KA7BA;AA8BAM,YA9BA,sBA8BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEAC,2BAFA,GAEAT,yCAFA;AAGAU,2BAHA,GAGAV,yCAHA;;AAAA,sBAKAS,wCALA;AAAA;AAAA;AAAA;;AAMAP;AANA;;AAAA;AAAA;AAAA,uBAUAC;AACAC,uCADA;AAEAC;AAFA,kBAVA;;AAAA;AAeAH;AAfA;AAAA;;AAAA;AAAA;AAAA;AAiBAK;AACAL,sBACA,0EADA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBA,KApDA;AAqDAS,UArDA,oBAqDA;AACA;AACA;AACA;AACA;AACA;AA1DA;AAFA","names":["name","methods","login","_username","document","_password","alert","axios","username","password","result","console","register","newUsername","newPassword","logout"],"sourceRoot":"src/components","sources":["LoginAndRegisterComponent.vue"],"sourcesContent":["<template>\n  <div id=\"login-page\">\n    <div id=\"input\" v-if=\"!this.$root.$data.isLoggedIn\">\n      <div id=\"username-wrapper\">\n        <input type=\"text\" id=\"username\" placeholder=\"Username\" />\n      </div>\n      <div></div>\n      <div id=\"password-wrapper\">\n        <input type=\"password\" id=\"password\" placeholder=\"Password\" />\n      </div>\n      <button id=\"login-button\" @click=\"login\">Login</button>\n      <button id=\"register-button\" @click=\"register\">Register</button>\n    </div>\n    <div v-if=\"this.$root.$data.isLoggedIn\">\n      You are logged in. Enjoy browsing\n      <div>\n        <button id=\"logout-button\" @click=\"logout\">Logout</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"LoginAndRegisterComponent\",\n  methods: {\n    async login() {\n      let result;\n      try {\n        let _username = document.getElementById(\"username\").value;\n        let _password = document.getElementById(\"password\").value;\n\n        if (_username === \"\" || _password === \"\") {\n          alert(\"Username and password cannot be blank\");\n          return;\n        }\n\n        result = await axios.post(\"/api/users/login\", {\n          username: _username,\n          password: _password,\n        });\n\n        this.$root.$data.isLoggedIn = true;\n        this.$root.$data.currentUser = _username;\n        this.$root.$data.currentFavorites = result.data.favorites;\n\n        document.getElementById(\"username\").value = \"\";\n        document.getElementById(\"password\").value = \"\";\n      } catch (e) {\n        console.log(e);\n        alert(\n          \"An error happened. Please check your credentials and/or try again later!\"\n        );\n      }\n    },\n    async register() {\n      try {\n        let newUsername = document.getElementById(\"username\").value;\n        let newPassword = document.getElementById(\"password\").value;\n\n        if (newUsername === \"\" || newPassword === \"\") {\n          alert(\"Username and password cannot be blank\");\n          return;\n        }\n\n        await axios.post(\"/api/users/register\", {\n          username: newUsername,\n          password: newPassword,\n        });\n\n        alert(\"New user successfully registered\");\n      } catch (e) {\n        console.log(e);\n        alert(\n          \"An error happened. Please check your credentials and/or try again later!\"\n        );\n      }\n    },\n    logout() {\n      this.$root.$data.currentUser = \"\";\n      this.$root.$data.currentFavorites = [];\n      this.$root.$data.currentDate = \"\";\n      this.$root.$data.isLoggedIn = false;\n    },\n  },\n};\n</script>\n\n<style scoped>\n#login-page {\n  margin-top: 125px;\n}\n#username-wrapper,\n#password-wrapper {\n  margin-bottom: 20px;\n}\n\n#username,\n#password {\n  border: 2px solid gray;\n}\n\n#login-button,\n#register-button {\n  margin: 0 10px;\n}\n\n#logout-button {\n  margin: 20px 10px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}